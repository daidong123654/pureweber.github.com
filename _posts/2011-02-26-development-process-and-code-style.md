---
layout: post
title: '浅谈程序开发过程以及代码风格'
description: 本文简要总结了程序开发过程；并从换行、空行、缩进三个方面总结了一些代码风格方面的经验。
author: 梁新宇
tags:
  - '代码风格'
  - '换行'
  - '空行'
  - '缩进'
  - '开发过程'

---

##程序开发过程

程序开发过程是一个很空泛的标题，由于笔者做过的程序开发很少，在这方面根本谈不上经验，只能说是初窥门径。只是根据资料和自己的理解，就现在着手的Mini wow进行一些交流和总结。

###定义：

程序开发是以下步骤的一个往复过程：编写新的源代码，测试、分析和提高新编写的代码以找出语法和语意错误。

###具体步骤：

 - **明确目标**：确定你的程序最终要达成什么，目标是得到什么：进行某个数据的处理？生成某种数据？等等。就Mini wow来说就是实现基本的WOW的功能，用户注册一个账户，可以进行打FB升级拿装备。这个具体功能由程序员来定。其中包括问题提出、可行性分析、需求分析和总体设计。

 - 分解步骤：对你的目标进行分解，将整个过程分成若干步骤，要达成最后的结果，首先需要完成哪一步，然后再完成哪一步，分解到每一步对你而言都比较清晰为止。比如小雨说的“可以一个界面一个界面地做，我就是这么做的。比如我现在需要一个首页，显示登录框，那我就先做个首页。然后登录完了得显示基本信息对吧，我再做信息显示。然后我要下副本，再做选择BOSS的界面...一步一步的这样”。

 - 细化最优：对于每个小步骤（已经变成相对简单的小问题），考虑有哪些实现方法，可能有多种，考虑哪种最优，对前后步骤的实现最有利。“框架都出来了，再细致地把一些东西抽出来，做成函数，让程序的逻辑更清除”。把每一步骤的逻辑用程序算法写出来，并且衔接好各个步骤，譬如采用过程控制，函数调用，等等。

 - 调试完善：整体调试程序，到正确无误位置，同时改进和重构你的程序，使得他更完善更精巧。



##代码风格

代码风格的必要性就不用多说了，直接说具体的。

###关于换行：

寻找最佳的断行位置

**在变量申明中，根据类别分类换行，并添加注释说明。**

例：

{% highlight java %}
// 要计算的数值　　
int num;　　
// 表示影响因子　　
int factor;　　
// 元素所在的索引号　　
int index;　　
// 数据列表的总长　　
int length;
{% endhighlight %}

**在表达式中，以最能清晰的表达出逻辑为基本准则。**

例： 

{% highlight java %}
double containerAspectRatio =　　
     (double)container.ClientWidth / container.ClientHeight; 
{% endhighlight %}

**在函数参数中，当参数数量较多，参数较长或者包含表达式的时候，这种排版比起单独写成一行更为直观醒目。**

例：

{% highlight java %}
Rectangle imageBounds = new Rectangle(　　
    itemBounds.X + padding,　　
    itemBounds.Y + padding,　　
    itemBounds.Width - padding * 2,　　
    itemBounds.Height - padding * 2　　
); 
{% endhighlight %}

###避免代码过于拥挤 

 - 使用空行分隔代码块，逻辑块。
 - 使用空格降低代码密度

**符号两侧添加空格的基本规则：**

 - 单目运算符（Unary Operators）与它的操作数之间应紧密相接，不需要空格。
 - 在双目、三目运算符（Binary/Ternary Operators）的左右两侧分别添加空格，括号。
 - 括号（包括小括号、中括号与大括号）的内侧应该紧靠操作数或其他运算符，不需要添加额外的空格。
 - 不要使用连续的两个或多个空格。


其实，如果理解了这些规则，在实际书写的时候很容易遵循。对于任何一个表达式，我们先把单目运算符和括号去掉，然后在双目、三目运算符的左右两侧分别　　添加一个空格，再将单目运算符和括号填回去，放在靠近自己操作数的一边即可。　　关于函数调用时，要不要在函数名和其后的括号之间添加空格的问题已经讨论了很久。其实这个是一个无伤大雅的事情，无论使用何种方式，都不会对代码　　的可读性产生多少实质性的影响，纯粹是各人喜好罢了。不过在这里，我建议采用Visual Studio中的默认规则：在函数调用时不添加空格，而在一些类似的带括号的语法结构中添加空格。 

###如何缩进

**嵌套或包含关系引起的缩进，关于控制结构。尽可能的使得分支结构更清晰。**

例：

{% highlight php %}
<?php
if ( $a == 1 ) {  
    echo 'A was equal to 1';  
    //很容易的可以添加其他代码  
} 
elseif ( $a == 2 ) {  
    //其他操作
}
?>
{% endhighlight %}

**因换行而产生的缩进**：我们在前面提到过，当一条语句太长而超出一定的宽度时，应该折行书写。此时，从第二行起到该语句结束之间的各行应该缩进一层，至下一条语句时再恢复原来的缩进位置。


###参考

 - [PHP编程风格](http://www.chinaunix.net/jh/27/65591.html) 
 - [代码风格](http://bbs.phpchina.com/thread-123675-1-1.html)
